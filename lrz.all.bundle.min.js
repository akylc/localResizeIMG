(function(t,l){if("object"===typeof exports&&"object"===typeof module)module.exports=l();else if("function"===typeof define&&define.amd)define([],l);else{var g=l(),m;for(m in g)("object"===typeof exports?exports:t)[m]=g[m]}})(this,function(){return function(t){function l(m){if(g[m])return g[m].exports;var k=g[m]={exports:{},id:m,loaded:!1};t[m].call(k.exports,k,k.exports,l);k.loaded=!0;return k.exports}var g={};l.m=t;l.c=g;l.p="";return l(0)}([function(t,l,g){g(7);g(8);t.exports=g(9)},function(t,l,g){(function(m){(function(k){function d(a,c){return function(){a.apply(c,arguments)}}function p(c){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof c)throw new TypeError("not a function");this._value=this._state=null;this._deferreds=[];w(c,d(a,this),d(b,this))}function D(a){var c=this;null===this._state?this._deferreds.push(a):h(function(){var b=c._state?a.onFulfilled:a.onRejected;if(null===b)(c._state?a.resolve:a.reject)(c._value);else{var f;try{f=b(c._value)}catch(e){a.reject(e);return}a.resolve(f)}})}function a(c){try{if(c===this)throw new TypeError("A promise cannot be resolved with itself.");if(c&&("object"===typeof c||"function"===typeof c)){var C=c.then;if("function"===typeof C){w(d(C,c),d(a,this),d(b,this));return}}this._state=!0;this._value=c;f.call(this)}catch(r){b.call(this,r)}}function b(a){this._state=!1;this._value=a;f.call(this)}function f(){for(var a=0,c=this._deferreds.length;a<c;a++)D.call(this,this._deferreds[a]);this._deferreds=null}function c(a,c,b,f){this.onFulfilled="function"===typeof a?a:null;this.onRejected="function"===typeof c?c:null;this.resolve=b;this.reject=f}function w(a,c,b){var f=!1;try{a(function(a){f||(f=!0,c(a))},function(a){f||(f=!0,b(a))})}catch(e){f||(f=!0,b(e))}}var h="function"===typeof m&&m||function(a){setTimeout(a,1)},A=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};p.prototype["catch"]=function(a){return this.then(null,a)};p.prototype.then=function(a,b){var f=this;return new p(function(d,e){D.call(f,new c(a,b,d,e))})};p.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&A(arguments[0])?arguments[0]:arguments);return new p(function(c,b){function f(v,n){try{if(n&&("object"===typeof n||"function"===typeof n)){var q=n.then;if("function"===typeof q){q.call(n,function(a){f(v,a)},b);return}}a[v]=n;0===--e&&c(a)}catch(x){b(x)}}if(0===a.length)return c([]);for(var e=a.length,n=0;n<a.length;n++)f(n,a[n])})};p.resolve=function(a){return a&&"object"===typeof a&&a.constructor===p?a:new p(function(c){c(a)})};p.reject=function(a){return new p(function(c,b){b(a)})};p.race=function(a){return new p(function(c,b){for(var f=0,e=a.length;f<e;f++)a[f].then(c,b)})};p._setImmediateFn=function(a){h=a};p.prototype.always=function(a){var c=this.constructor;return this.then(function(b){return c.resolve(a()).then(function(){return b})},function(b){return c.resolve(a()).then(function(){throw b;})})};"undefined"!==typeof t&&t.exports?t.exports=p:k.Promise||(k.Promise=p)})(this)}).call(l,g(2).setImmediate)},function(t,l,g){(function(m){function k(d,a){this._id=d;this._clearFn=a}var d="undefined"!==typeof m&&m||"undefined"!==typeof self&&self||window,p=Function.prototype.apply;l.setTimeout=function(){return new k(p.call(setTimeout,d,arguments),clearTimeout)};l.setInterval=function(){return new k(p.call(setInterval,d,arguments),clearInterval)};l.clearTimeout=l.clearInterval=function(d){d&&d.close()};k.prototype.unref=k.prototype.ref=function(){};k.prototype.close=function(){this._clearFn.call(d,this._id)};l.enroll=function(d,a){clearTimeout(d._idleTimeoutId);d._idleTimeout=a};l.unenroll=function(d){clearTimeout(d._idleTimeoutId);d._idleTimeout=-1};l._unrefActive=l.active=function(d){clearTimeout(d._idleTimeoutId);var a=d._idleTimeout;0<=a&&(d._idleTimeoutId=setTimeout(function(){d._onTimeout&&d._onTimeout()},a))};g(3);l.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof m&&m.setImmediate||this&&this.setImmediate;l.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof m&&m.clearImmediate||this&&this.clearImmediate}).call(l,function(){return this}())},function(t,l,g){(function(m,k){(function(d,p){function m(a){delete G[a]}function a(c){if(r)setTimeout(a,0,c);else{var e=G[c];if(e){r=!0;try{var b=e.callback,f=e.args;switch(f.length){case 0:b();break;case 1:b(f[0]);break;case 2:b(f[0],f[1]);break;case 3:b(f[0],f[1],f[2]);break;default:b.apply(p,f)}}finally{m(c),r=!1}}}}function b(){e=function(c){k.nextTick(function(){a(c)})}}function f(){if(d.postMessage&&!d.importScripts){var a=!0,c=d.onmessage;d.onmessage=function(){a=!1};d.postMessage("","*");d.onmessage=c;return a}}function c(){var c="setImmediate$"+Math.random()+"$",b=function(b){b.source===d&&"string"===typeof b.data&&0===b.data.indexOf(c)&&a(+b.data.slice(c.length))};d.addEventListener?d.addEventListener("message",b,!1):d.attachEvent("onmessage",b);e=function(a){d.postMessage(c+a,"*")}}function w(){var c=new MessageChannel;c.port1.onmessage=function(c){a(c.data)};e=function(a){c.port2.postMessage(a)}}function h(){var c=z.documentElement;e=function(b){var e=z.createElement("script");e.onreadystatechange=function(){a(b);e.onreadystatechange=null;c.removeChild(e);e=null};c.appendChild(e)}}function A(){e=function(c){setTimeout(a,0,c)}}if(!d.setImmediate){var C=1,G={},r=!1,z=d.document,e,n=Object.getPrototypeOf&&Object.getPrototypeOf(d),n=n&&n.setTimeout?n:d;"[object process]"==={}.toString.call(d.process)?b():f()?c():d.MessageChannel?w():z&&"onreadystatechange"in z.createElement("script")?h():A();n.setImmediate=function(a){"function"!==typeof a&&(a=new Function(""+a));for(var c=Array(arguments.length-1),b=0;b<c.length;b++)c[b]=arguments[b+1];G[C]={callback:a,args:c};e(C);return C++};n.clearImmediate=m}})("undefined"===typeof self?"undefined"===typeof m?this:m:self)}).call(l,function(){return this}(),g(4))},function(t,l){function g(){throw Error("setTimeout has not been defined");}function m(){throw Error("clearTimeout has not been defined");}function k(a){if(c===setTimeout)return setTimeout(a,0);if((c===g||!c)&&setTimeout)return c=setTimeout,setTimeout(a,0);try{return c(a,0)}catch(z){try{return c.call(null,a,0)}catch(e){return c.call(this,a,0)}}}function d(a){if(w===clearTimeout)return clearTimeout(a);if((w===m||!w)&&clearTimeout)return w=clearTimeout,clearTimeout(a);try{return w(a)}catch(z){try{return w.call(null,a)}catch(e){return w.call(this,a)}}}function p(){A&&C&&(A=!1,C.length?h=C.concat(h):G=-1,h.length&&D())}function D(){if(!A){var a=k(p);A=!0;for(var c=h.length;c;){C=h;for(h=[];++G<c;)C&&C[G].run();G=-1;c=h.length}C=null;A=!1;d(a)}}function a(a,c){this.fun=a;this.array=c}function b(){}var f=t.exports={},c,w;try{c="function"===typeof setTimeout?setTimeout:g}catch(r){c=g}try{w="function"===typeof clearTimeout?clearTimeout:m}catch(r){w=m}var h=[],A=!1,C,G=-1;f.nextTick=function(c){var b=Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)b[e-1]=arguments[e];h.push(new a(c,b));1!==h.length||A||k(D)};a.prototype.run=function(){this.fun.apply(null,this.array)};f.title="browser";f.browser=!0;f.env={};f.argv=[];f.version="";f.versions={};f.on=b;f.addListener=b;f.once=b;f.off=b;f.removeListener=b;f.removeAllListeners=b;f.emit=b;f.prependListener=b;f.prependOnceListener=b;f.listeners=function(a){return[]};f.binding=function(a){throw Error("process.binding is not supported");};f.cwd=function(){return"/"};f.chdir=function(a){throw Error("process.chdir is not supported");};f.umask=function(){return 0}},function(t,l){var g;try{new Blob,g=!0}catch(k){g=!1}var m=g?window.Blob:function(m,d){var p=new (window.BlobBuilder||window.WebKitBlobBuilder||window.MSBlobBuilder||window.MozBlobBuilder);m.forEach(function(d){p.append(d)});return p.getBlob(d?d.type:void 0)};g=function(){function k(){var p=this,k=[],a=Array(21).join("-")+(1E16*+new Date*Math.random()).toString(36),b=XMLHttpRequest.prototype.send;this.getParts=function(){return k.toString()};this.append=function(b,c,d){k.push("--"+a+'\r\nContent-Disposition: form-data; name\x3d"'+b+'"');c instanceof Blob?(k.push('; filename\x3d"'+(d||"blob")+'"\r\nContent-Type: '+c.type+"\r\n\r\n"),k.push(c)):k.push("\r\n\r\n"+c);k.push("\r\n")};d++;XMLHttpRequest.prototype.send=function(f){var c,w=this;f===p?(k.push("--"+a+"--\r\n"),f=new m(k),c=new FileReader,c.onload=function(){b.call(w,c.result)},c.onerror=function(a){throw a;},c.readAsArrayBuffer(f),this.setRequestHeader("Content-Type","multipart/form-data; boundary\x3d"+a),d--,0==d&&(XMLHttpRequest.prototype.send=b)):b.call(this,f)}}var d=0;k.prototype=Object.create(FormData.prototype);return k}();t.exports={Blob:m,FormData:~navigator.userAgent.indexOf("Android")&&~navigator.vendor.indexOf("Google")&&!~navigator.userAgent.indexOf("Chrome")&&534>=navigator.userAgent.match(/AppleWebKit\/(\d+)/).pop()||/MQQBrowser/g.test(navigator.userAgent)?g:FormData}},function(t,l,g){var m,k;(function(){function d(a,c){c||a.match(/^data\:([^\;]+)\;base64,/mi);a=a.replace(/^data\:([^\;]+)\;base64,/gmi,"");for(var b=atob(a),e=b.length,f=new ArrayBuffer(e),d=new Uint8Array(f),n=0;n<e;n++)d[n]=b.charCodeAt(n);return f}function p(a,c){var b=new XMLHttpRequest;b.open("GET",a,!0);b.responseType="blob";b.onload=function(a){200!=this.status&&0!==this.status||c(this.response)};b.send()}function g(b,f){function e(e){var d=a(e);a:{var n=new DataView(e);if(255!=n.getUint8(0)||216!=n.getUint8(1))e=!1;else{for(var q=2,x=e.byteLength;q<x;){var v=n,h=q;if(56===v.getUint8(h)&&66===v.getUint8(h+1)&&73===v.getUint8(h+2)&&77===v.getUint8(h+3)&&4===v.getUint8(h+4)&&4===v.getUint8(h+5)){v=n.getUint8(q+7);0!==v%2&&(v+=1);0===v&&(v=4);x=q+8+v;q=n.getUint16(q+6+v);n=x;e=new DataView(e);for(var x={},r,v=n;v<n+q;)28===e.getUint8(v)&&2===e.getUint8(v+1)&&(h=e.getUint8(v+2),h in z&&(r=e.getInt16(v+3),h=z[h],r=c(e,v+5,r),x.hasOwnProperty(h)?x[h]instanceof Array?x[h].push(r):x[h]=[x[h],r]:x[h]=r)),v++;e=x;break a}q++}e=void 0}}b.exifdata=d||{};b.iptcdata=e||{};f&&f.call(b)}if(b.src)if(/^data\:/i.test(b.src)){var n=d(b.src);e(n)}else if(/^blob\:/i.test(b.src)){var q=new FileReader;q.onload=function(a){e(a.target.result)};p(b.src,function(a){q.readAsArrayBuffer(a)})}else{var x=new XMLHttpRequest;x.onload=function(){200==this.status||0===this.status?e(x.response):f(Error("Could not load image"));x=null};x.open("GET",b.src,!0);x.responseType="arraybuffer";x.send(null)}else window.FileReader&&(b instanceof window.Blob||b instanceof window.File)&&(q=new FileReader,q.onload=function(a){e(a.target.result)},q.readAsArrayBuffer(b))}function a(a){var c=new DataView(a);if(255!=c.getUint8(0)||216!=c.getUint8(1))return!1;var b=2;a=a.byteLength;for(var e;b<a;){if(255!=c.getUint8(b))return!1;e=c.getUint8(b+1);if(225==e)return w(c,b+4,c.getUint16(b+2)-2);b+=2+c.getUint16(b+2)}}function b(a,c,b,d,q){var e=a.getUint16(b,!q),n={},v,h,r;for(r=0;r<e;r++)v=b+12*r+2,h=d[a.getUint16(v,!q)],n[h]=f(a,v,c,b,q);return n}function f(a,b,f,d,q){var e=a.getUint16(b+2,!q);d=a.getUint32(b+4,!q);f=a.getUint32(b+8,!q)+f;var n,h;switch(e){case 1:case 7:if(1==d)return a.getUint8(b+8,!q);f=4<d?f:b+8;b=[];for(e=0;e<d;e++)b[e]=a.getUint8(f+e);return b;case 2:return c(a,4<d?f:b+8,d-1);case 3:if(1==d)return a.getUint16(b+8,!q);f=2<d?f:b+8;b=[];for(e=0;e<d;e++)b[e]=a.getUint16(f+2*e,!q);return b;case 4:if(1==d)return a.getUint32(b+8,!q);b=[];for(e=0;e<d;e++)b[e]=a.getUint32(f+4*e,!q);return b;case 5:if(1==d)return n=a.getUint32(f,!q),h=a.getUint32(f+4,!q),a=new Number(n/h),a.numerator=n,a.denominator=h,a;b=[];for(e=0;e<d;e++)n=a.getUint32(f+8*e,!q),h=a.getUint32(f+4+8*e,!q),b[e]=new Number(n/h),b[e].numerator=n,b[e].denominator=h;return b;case 9:if(1==d)return a.getInt32(b+8,!q);b=[];for(e=0;e<d;e++)b[e]=a.getInt32(f+4*e,!q);return b;case 10:if(1==d)return a.getInt32(f,!q)/a.getInt32(f+4,!q);b=[];for(e=0;e<d;e++)b[e]=a.getInt32(f+8*e,!q)/a.getInt32(f+4+8*e,!q);return b}}function c(a,b,c){var e="",f;for(f=b;f<b+c;f++)e+=String.fromCharCode(a.getUint8(f));return e}function w(a,f){if("Exif"!=c(a,f,4))return!1;var e,d,h,n,k=f+6;if(18761==a.getUint16(k))e=!1;else if(19789==a.getUint16(k))e=!0;else return!1;if(42!=a.getUint16(k+2,!e))return!1;d=a.getUint32(k+4,!e);if(8>d)return!1;d=b(a,k,k+d,C,e);if(d.ExifIFDPointer)for(h in n=b(a,k,k+d.ExifIFDPointer,A,e),n){switch(h){case "LightSource":case "Flash":case "MeteringMode":case "ExposureProgram":case "SensingMethod":case "SceneCaptureType":case "SceneType":case "CustomRendered":case "WhiteBalance":case "GainControl":case "Contrast":case "Saturation":case "Sharpness":case "SubjectDistanceRange":case "FileSource":n[h]=r[h][n[h]];break;case "ExifVersion":case "FlashpixVersion":n[h]=String.fromCharCode(n[h][0],n[h][1],n[h][2],n[h][3]);break;case "ComponentsConfiguration":n[h]=r.Components[n[h][0]]+r.Components[n[h][1]]+r.Components[n[h][2]]+r.Components[n[h][3]]}d[h]=n[h]}if(d.GPSInfoIFDPointer)for(h in e=b(a,k,k+d.GPSInfoIFDPointer,G,e),e){switch(h){case "GPSVersionID":e[h]=e[h][0]+"."+e[h][1]+"."+e[h][2]+"."+e[h][3]}d[h]=e[h]}return d}var h=function(a){if(a instanceof h)return a;if(!(this instanceof h))return new h(a);this.EXIFwrapped=a};"undefined"!==typeof t&&t.exports&&(l=t.exports=h);l.EXIF=h;var A=h.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},C=h.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},G=h.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},r=h.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},z={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};h.getData=function(a,b){if((a instanceof Image||a instanceof HTMLImageElement)&&!a.complete)return!1;a.exifdata?b&&b.call(a):g(a,b);return!0};h.getTag=function(a,b){if(a.exifdata)return a.exifdata[b]};h.getAllTags=function(a){if(!a.exifdata)return{};var b;a=a.exifdata;var c={};for(b in a)a.hasOwnProperty(b)&&(c[b]=a[b]);return c};h.pretty=function(a){if(!a.exifdata)return"";var b;a=a.exifdata;var c="";for(b in a)a.hasOwnProperty(b)&&(c="object"==typeof a[b]?a[b]instanceof Number?c+(b+" : "+a[b]+" ["+a[b].numerator+"/"+a[b].denominator+"]\r\n"):c+(b+" : ["+a[b].length+" values]\r\n"):c+(b+" : "+a[b]+"\r\n"));return c};h.readFromBinaryFile=function(b){return a(b)};!(m=[],k=function(){return h}.apply(l,m),void 0!==k&&(t.exports=k))}).call(this)},function(t,l,g){var m,k;(function(){function d(a,b,f){var c=document.createElement("canvas");p(a,c,b,f);return c.toDataURL("image/jpeg",b.quality||.8)}function p(a,b,f,c){var d=a.naturalWidth,h=a.naturalHeight,k=f.width,p=f.height,m=b.getContext("2d");m.save();f=f.orientation;switch(f){case 5:case 6:case 7:case 8:b.width=p;b.height=k;break;default:b.width=k,b.height=p}switch(f){case 2:m.translate(k,0);m.scale(-1,1);break;case 3:m.translate(k,p);m.rotate(Math.PI);break;case 4:m.translate(0,p);m.scale(1,-1);break;case 5:m.rotate(.5*Math.PI);m.scale(1,-1);break;case 6:m.rotate(.5*Math.PI);m.translate(0,-p);break;case 7:m.rotate(.5*Math.PI);m.translate(k,-p);m.scale(-1,1);break;case 8:m.rotate(-.5*Math.PI),m.translate(-k,0)}b=a.naturalWidth;1048576<b*a.naturalHeight?(f=document.createElement("canvas"),f.width=f.height=1,f=f.getContext("2d"),f.drawImage(a,-b+1,0),b=0===f.getImageData(0,0,1,1).data[3]):b=!1;b&&(d/=2,h/=2);b=document.createElement("canvas");b.width=b.height=1024;f=b.getContext("2d");if(c){c=h;var r=document.createElement("canvas");r.width=1;r.height=c;r=r.getContext("2d");r.drawImage(a,0,0);for(var r=r.getImageData(0,0,1,c).data,g=0,e=c,n=c;n>g;)0===r[4*(n-1)+3]?e=n:g=n,n=e+g>>1;c=n/c;c=0===c?1:c}else c=1;k=Math.ceil(1024*k/d);p=Math.ceil(1024*p/h/c);for(r=c=0;c<h;){for(e=g=0;g<d;)f.clearRect(0,0,1024,1024),f.drawImage(a,-g,-c),m.drawImage(b,0,0,1024,1024,e,r,k,p),g+=1024,e+=k;c+=1024;r+=p}m.restore()}function g(a){if(window.Blob&&a instanceof Blob){var b=new Image,f=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!f)throw Error("No createObjectURL function found to create blob url");b.src=f.createObjectURL(a);this.blob=a;a=b}if(!a.naturalWidth&&!a.naturalHeight){var c=this;a.onload=function(){var a=c.imageLoadListeners;if(a){c.imageLoadListeners=null;for(var b=0,f=a.length;b<f;b++)a[b]()}};this.imageLoadListeners=[]}this.srcImage=a}g.prototype.render=function(a,b,f){if(this.imageLoadListeners){var c=this;this.imageLoadListeners.push(function(){c.render(a,b,f)})}else{b=b||{};var k=this.srcImage,h=k.src,m=h.length,g=k.naturalWidth,k=k.naturalHeight,l=b.width,r=b.height,t=b.maxWidth,e=b.maxHeight,h=this.blob&&"image/jpeg"===this.blob.type||0===h.indexOf("data:image/jpeg")||h.indexOf(".jpg")===m-4||h.indexOf(".jpeg")===m-5;l&&!r?r=k*l/g<<0:r&&!l?l=g*r/k<<0:(l=g,r=k);t&&l>t&&(l=t,r=k*l/g<<0);e&&r>e&&(r=e,l=g*r/k<<0);var g={width:l,height:r},n;for(n in b)g[n]=b[n];n=a.tagName.toLowerCase();"img"===n?a.src=d(this.srcImage,g,h):"canvas"===n&&p(this.srcImage,a,g,h);if("function"===typeof this.onrender)this.onrender(a);f&&f()}};!(m=[],k=function(){return g}.apply(l,m),void 0!==k&&(t.exports=k))})()},function(t,l){t.exports=function(g){function m(a,b){for(var c=0,f=0,d=[],e=1;16>=e;e++){for(var B=1;B<=a[e];B++)d[b[f]]=[],d[b[f]][0]=c,d[b[f]][1]=e,f++,c++;c*=2}return d}function k(a){var b=a[0];for(a=a[1]-1;0<=a;)b&1<<a&&(q|=1<<x),a--,x--,0>x&&(255==q?(d(255),d(0)):d(q),x=7,q=0)}function d(a){J.push(O[a])}function p(a){d(a>>8&255);d(a&255)}function l(a,b,c,f,d){var h=d[0],m=d[240],y,r,p,g,B,l,q,w,E,u=0;for(y=0;8>y;++y){r=a[u];p=a[u+1];g=a[u+2];B=a[u+3];l=a[u+4];q=a[u+5];w=a[u+6];E=a[u+7];var t=r+E;r-=E;E=p+w;p-=w;w=g+q;g-=q;q=B+l;B-=l;l=t+q;t-=q;q=E+w;E-=w;a[u]=l+q;a[u+4]=l-q;l=.707106781*(E+t);a[u+2]=t+l;a[u+6]=t-l;l=B+g;q=g+p;E=p+r;g=.382683433*(l-E);B=.5411961*l+g;l=1.306562965*E+g;q*=.707106781;g=r+q;r-=q;a[u+5]=r+B;a[u+3]=r-B;a[u+1]=g+l;a[u+7]=g-l;u+=8}for(y=u=0;8>y;++y)r=a[u],p=a[u+8],g=a[u+16],B=a[u+24],l=a[u+32],q=a[u+40],w=a[u+48],E=a[u+56],t=r+E,r-=E,E=p+w,p-=w,w=g+q,g-=q,q=B+l,B-=l,l=t+q,t-=q,q=E+w,E-=w,a[u]=l+q,a[u+32]=l-q,l=.707106781*(E+t),a[u+16]=t+l,a[u+48]=t-l,l=B+g,q=g+p,E=p+r,g=.382683433*(l-E),B=.5411961*l+g,l=1.306562965*E+g,q*=.707106781,g=r+q,r-=q,a[u+40]=r+B,a[u+24]=r-B,a[u+8]=g+l,a[u+56]=g-l,u++;for(y=0;64>y;++y)u=a[y]*b[y],n[y]=0<u?u+.5|0:u-.5|0;a=n;for(b=0;64>b;++b)v[K[b]]=a[b];a=v[0]-c;c=v[0];0==a?k(f[0]):(y=32767+a,k(f[e[y]]),k(z[y]));for(f=63;0<f&&0==v[f];f--);if(0==f)return k(h),c;for(a=1;a<=f;){for(b=a;0==v[a]&&a<=f;++a);b=a-b;if(16<=b){y=b>>4;for(u=1;u<=y;++u)k(m);b&=15}y=32767+v[a];k(d[(b<<4)+e[y]]);k(z[y]);a++}63!=f&&k(h);return c}function a(a){0>=a&&(a=1);100<a&&(a=100);if(P!=a){for(var d=50>a?Math.floor(5E3/a):Math.floor(200-2*a),e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],k=0;64>k;k++){var g=b((e[k]*d+50)/100);1>g?g=1:255<g&&(g=255);f[K[k]]=g}e=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99];for(k=0;64>k;k++)g=b((e[k]*d+50)/100),1>g?g=1:255<g&&(g=255),c[K[k]]=g;d=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379];for(k=e=0;8>k;k++)for(g=0;8>g;g++)w[e]=1/(f[K[e]]*d[k]*d[g]*8),h[e]=1/(c[K[e]]*d[k]*d[g]*8),e++;P=a}}var b=Math.floor,f=Array(64),c=Array(64),w=Array(64),h=Array(64),t,C,G,r,z=Array(65535),e=Array(65535),n=Array(64),v=Array(64),J=[],q=0,x=7,L=Array(64),M=Array(64),N=Array(64),O=Array(256),F=Array(2048),P,K=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],S=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],U=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],V=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],X=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Y=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(b,e,g){(new Date).getTime();e&&a(e);J=[];q=0;x=7;p(65496);p(65504);p(16);d(74);d(70);d(73);d(70);d(0);d(1);d(1);d(0);p(1);p(1);d(0);d(0);p(65499);p(132);d(0);for(e=0;64>e;e++)d(f[e]);d(1);for(e=0;64>e;e++)d(c[e]);e=b.width;var n=b.height;p(65472);p(17);d(8);p(n);p(e);d(3);d(1);d(17);d(0);d(2);d(17);d(1);d(3);d(17);d(1);p(65476);p(418);d(0);for(e=0;16>e;e++)d(Q[e+1]);for(e=0;11>=e;e++)d(S[e]);d(16);for(e=0;16>e;e++)d(T[e+1]);for(e=0;161>=e;e++)d(U[e]);d(1);for(e=0;16>e;e++)d(V[e+1]);for(e=0;11>=e;e++)d(W[e]);d(17);for(e=0;16>e;e++)d(X[e+1]);for(e=0;161>=e;e++)d(Y[e]);p(65498);p(12);d(3);d(1);d(0);d(2);d(17);d(3);d(17);d(0);d(63);d(0);var m=n=e=0;q=0;x=7;this.encode.displayName="_encode_";var B=b.data,v=b.height;b=4*b.width;for(var y,z=0,A,D,H,R,I;z<v;){for(y=0;y<b;){R=b*z+y;for(I=0;64>I;I++)D=I>>3,A=4*(I&7),H=R+D*b+A,z+D>=v&&(H-=b*(z+1+D-v)),y+A>=b&&(H-=y+A-b+4),A=B[H++],D=B[H++],H=B[H++],L[I]=(F[A]+F[D+256>>0]+F[H+512>>0]>>16)-128,M[I]=(F[A+768>>0]+F[D+1024>>0]+F[H+1280>>0]>>16)-128,N[I]=(F[A+1280>>0]+F[D+1536>>0]+F[H+1792>>0]>>16)-128;e=l(L,w,e,t,G);n=l(M,h,n,C,r);m=l(N,h,m,C,r);y+=32}z+=8}0<=x&&(b=[],b[1]=x+1,b[0]=(1<<x+1)-1,k(b));p(65497);if(g){g=J.length;b=new Uint8Array(g);for(e=0;e<g;e++)b[e]=J[e].charCodeAt();J=[];(new Date).getTime();return b}g="data:image/jpeg;base64,"+btoa(J.join(""));J=[];(new Date).getTime();return g};(function(){(new Date).getTime();g||(g=50);for(var b=String.fromCharCode,c=0;256>c;c++)O[c]=b(c);t=m(Q,S);C=m(V,W);G=m(T,U);r=m(X,Y);for(var b=1,c=2,f=1;15>=f;f++){for(var d=b;d<c;d++)e[32767+d]=f,z[32767+d]=[],z[32767+d][1]=f,z[32767+d][0]=d;for(d=-(c-1);d<=-b;d++)e[32767+d]=f,z[32767+d]=[],z[32767+d][1]=f,z[32767+d][0]=c-1+d;b<<=1;c<<=1}for(b=0;256>b;b++)F[b]=19595*b,F[b+256>>0]=38470*b,F[b+512>>0]=7471*b+32768,F[b+768>>0]=-11059*b,F[b+1024>>0]=-21709*b,F[b+1280>>0]=32768*b+8421375,F[b+1536>>0]=-27439*b,F[b+1792>>0]=-5329*b;a(g);(new Date).getTime()})()}},function(t,l,g){function m(a,b){if(!a)throw Error("\u6ca1\u6709\u6536\u5230\u56fe\u7247\uff0c\u53ef\u80fd\u7684\u89e3\u51b3\u65b9\u6848\uff1ahttps://github.com/think2011/localResizeIMG/issues/7");b=b||{};this.defaults={width:null,height:null,fieldName:"file",ingnoreOrientation:D.iOS?D.newIOS:!0,quality:.7};this.file=a;for(var d in b)b.hasOwnProperty(d)&&(this.defaults[d]=b[d]);return this.init()}g.p=function(a){var b=null;return(b=a?[].filter.call(document.scripts,function(b){return-1!==b.src.indexOf(a)})[0]:document.scripts[document.scripts.length-1])?b.src.substr(0,b.src.lastIndexOf("/")):null}("lrz")+"/";window.URL=window.URL||window.webkitURL;var k=g(1),d=g(5),p=g(6),D=function(a){var b=/OS (.*) like Mac OS X/g.exec(a),d=/Android (\d.*?);/g.exec(a)||/Android\/(\d.*?) /g.exec(a),c=b?b.pop().match(/(\d+)(_)?(\d+)?/)[0].replace("_","."):0;return{oldIOS:b?8>c:!1,newIOS:b?13.4<=c:!1,oldAndroid:d?4.5>+d.pop().substr(0,3):!1,iOS:/\(i[^;]+;( U;)? CPU.+Mac OS X/.test(a),android:/Android/g.test(a),mQQBrowser:/MQQBrowser/g.test(a)}}(navigator.userAgent);m.prototype.init=function(){var a=this,b=a.file,f="string"===typeof b,c=/^data:/.test(b),g=new Image,h=document.createElement("canvas"),l=f?b:URL.createObjectURL(b);a.img=g;a.blob=l;a.canvas=h;a.fileName=f?c?"base64.jpg":b.split("/").pop():b.name;if(!document.createElement("canvas").getContext)throw Error("\u6d4f\u89c8\u5668\u4e0d\u652f\u6301canvas");return new k(function(f,h){g.onerror=function(){var a=Error("\u52a0\u8f7d\u56fe\u7247\u6587\u4ef6\u5931\u8d25");h(a);throw a;};g.onload=function(){a._getBase64().then(function(a){if(10>a.length)throw a=Error("\u751f\u6210base64\u5931\u8d25"),h(a),a;return a}).then(function(c){var g;if("object"===typeof a.file&&c.length>a.file.size)g=new FormData,b=a.file;else{g=new d.FormData;var e;e=0<=c.split(",")[0].indexOf("base64")?atob(c.split(",")[1]):unescape(c.split(",")[1]);for(var h=c.split(",")[0].split(":")[1].split(";")[0],k=new Uint8Array(e.length),l=0;l<e.length;l++)k[l]=e.charCodeAt(l);b=new d.Blob([k.buffer],{type:h})}g.append(a.defaults.fieldName,b,a.fileName.replace(/\..+/g,".jpg"));f({formData:g,fileLen:+b.size,base64:c,base64Len:c.length,origin:a.file,file:b});for(var m in a)a.hasOwnProperty(m)&&(a[m]=null);URL.revokeObjectURL(a.blob)})};!c&&(g.crossOrigin="*");g.src=l})};m.prototype._getBase64=function(){var a=this,b=a.img,d=a.file,c=a.canvas;return new k(function(f){try{p.getData("object"===typeof d?d:b,function(){a.orientation=a.defaults.ingnoreOrientation?0:p.getTag(this,"Orientation");a.resize=a._getResize();a.ctx=c.getContext("2d");c.width=a.resize.width;c.height=a.resize.height;a.ctx.fillStyle="#fff";a.ctx.fillRect(0,0,c.width,c.height);D.oldIOS?a._createBase64ForOldIOS().then(f):a._createBase64().then(f)})}catch(h){throw Error(h);}})};m.prototype._createBase64ForOldIOS=function(){var a=this.img,b=this.canvas,d=this.defaults,c=this.orientation;return new k(function(f){!function(){var h=[g(7)];(function(g){g=new g(a);-1<"5678".indexOf(c)?g.render(b,{width:b.height,height:b.width,orientation:c}):g.render(b,{width:b.width,height:b.height,orientation:c});f(b.toDataURL("image/jpeg",d.quality))}).apply(null,h)}()})};m.prototype._createBase64=function(){var a=this.resize,b=this.img,d=this.canvas,c=this.ctx,l=this.defaults;switch(this.orientation){case 3:c.rotate(180*Math.PI/180);c.drawImage(b,-a.width,-a.height,a.width,a.height);break;case 6:c.rotate(90*Math.PI/180);c.drawImage(b,0,-a.width,a.height,a.width);break;case 8:c.rotate(270*Math.PI/180);c.drawImage(b,-a.height,0,a.height,a.width);break;case 2:c.translate(a.width,0);c.scale(-1,1);c.drawImage(b,0,0,a.width,a.height);break;case 4:c.translate(a.width,0);c.scale(-1,1);c.rotate(180*Math.PI/180);c.drawImage(b,-a.width,-a.height,a.width,a.height);break;case 5:c.translate(a.width,0);c.scale(-1,1);c.rotate(90*Math.PI/180);c.drawImage(b,0,-a.width,a.height,a.width);break;case 7:c.translate(a.width,0);c.scale(-1,1);c.rotate(270*Math.PI/180);c.drawImage(b,-a.height,0,a.height,a.width);break;default:c.drawImage(b,0,0,a.width,a.height)}return new k(function(a){D.oldAndroid||D.mQQBrowser||!navigator.userAgent?!function(){var b=[g(8)];(function(b){b=new b;var f=c.getImageData(0,0,d.width,d.height);a(b.encode(f,100*l.quality))}).apply(null,b)}():a(d.toDataURL("image/jpeg",l.quality))})};m.prototype._getResize=function(){var a=this.img,b=this.defaults,d=b.width,b=b.height,c={width:a.width,height:a.height};-1<"5678".indexOf(this.orientation)&&(c.width=a.height,c.height=a.width);if(c.width<d||c.height<b)return c;a=c.width/c.height;d&&b?a>=d/b?c.width>d&&(c.width=d,c.height=Math.ceil(d/a)):c.height>b&&(c.height=b,c.width=Math.ceil(b*a)):d?d<c.width&&(c.width=d,c.height=Math.ceil(d/a)):b&&b<c.height&&(c.width=Math.ceil(b*a),c.height=b);for(;3264<=c.width||2448<=c.height;)c.width*=.8,c.height*=.8;return c};window.lrz=function(a,b){return new m(a,b)};window.lrz.version="__packageJSON.version__";t.exports=window.lrz}])});